/* Tiny Advanced Tables plugin
 *
 * Copyright 2010-2019 Tiny Technologies LLC. All rights reserved.
 *
 * Version: 1.0.1-15
 */

!function(a){"use strict";function C(){}function O(n){return function(){return n}}function t(n){return n}function i(r){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=o.concat(n);return r.apply(null,t)}}function n(){return u}var e,f=O(!1),N=O(!0),u=(e={fold:function(n,e){return n()},is:f,isSome:f,isNone:N,getOr:c,getOrThunk:o,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:O(null),getOrUndefined:O(void 0),or:c,orThunk:o,map:n,each:C,bind:n,exists:f,forall:N,filter:n,equals:r,equals_:r,toArray:function(){return[]},toString:O("none()")},Object.freeze&&Object.freeze(e),e);function r(n){return n.isNone()}function o(n){return n()}function c(n){return n}function s(e){return function(n){return function(n){if(null===n)return"null";var e=typeof n;return"object"==e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e}(n)===e}}function l(n,e){return t=n,r=e,-1<qn.call(t,r);var t,r}function E(n,e){for(var t=0,r=n.length;t<r;t++){if(e(n[t],t))return!0}return!1}function m(n,e){for(var t=[],r=0;r<n;r++)t.push(e(r));return t}function A(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r}function R(n,e){for(var t=0,r=n.length;t<r;t++){e(n[t],t)}}function d(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t}function D(n,e){if(0===n.length)return[];for(var t=e(n[0]),r=[],o=[],u=0,i=n.length;u<i;u++){var c=n[u],a=e(c);a!==t&&(r.push(o),o=[]),t=a,o.push(c)}return 0!==o.length&&r.push(o),r}function v(n,e,t){return function(n,e){for(var t=n.length-1;0<=t;t--){e(n[t],t)}}(n,function(n){t=e(t,n)}),t}function k(n,e,t){return R(n,function(n){t=e(t,n)}),t}function h(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];if(e(o,t))return kn.some(o)}return kn.none()}function p(n,e){for(var t=0,r=n.length;t<r;t++){if(e(n[t],t))return kn.some(t)}return kn.none()}function g(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!jn(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);Ln.apply(e,n[t])}return e}function I(n,e){return g(A(n,e))}function w(n,e){for(var t=0,r=n.length;t<r;++t){if(!0!==e(n[t],t))return!1}return!0}function j(n,e){var t=Bn.call(n,0);return t.sort(e),t}function b(n){return parseInt(n,10)}function y(n,e){var t=n-e;return 0==t?0:0<t?1:-1}function S(n,e,t){return{major:n,minor:e,patch:t}}function T(n){var e=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(n);return e?S(b(e[1]),b(e[2]),b(e[3])):S(0,0,0)}function x(n,e){return!!n&&-1===function(n,e){var t=y(n.major,e.major);if(0!==t)return t;var r=y(n.minor,e.minor);if(0!==r)return r;var o=y(n.patch,e.patch);return 0!==o?o:0}(T([(t=n).majorVersion,t.minorVersion].join(".").split(".").slice(0,3).join(".")),T(e));var t}function M(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return R(e,function(n,e){r[n]=O(t[e])}),r}}function P(n,e){for(var t=Vn(n),r=0,o=t.length;r<o;r++){var u=t[r];e(n[u],u)}}function _(n){return n.slice(0).sort()}function B(n,e){throw new Error("All required keys ("+_(n).join(", ")+") were not specified. Specified keys were: "+_(e).join(", ")+".")}function q(n){throw new Error("Unsupported keys for object: "+_(n).join(", "))}function L(e,n){if(!jn(n))throw new Error("The "+e+" fields must be an array. Was: "+n+".");R(n,function(n){if(!In(n))throw new Error("The value "+n+" in the "+e+" fields was not a string.")})}function z(n){var t=_(n);h(t,function(n,e){return e<t.length-1&&n===t[e+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})}function V(e,n){var t=d(n,function(n){return!l(e,n)});0<t.length&&q(t)}function F(n){return n.dom().nodeName.toLowerCase()}function W(n){return n.dom().nodeType}function U(e){return function(n){return W(n)===e}}function G(n){return W(n)===Un||"#comment"===F(n)}function Y(n,e,t){if(!(In(t)||Mn(t)||_n(t)))throw a.console.error("Invalid call to Attr.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")}function H(n,e,t){Y(n.dom(),e,t)}function X(n,e){var t=n.dom();P(e,function(n,e){Y(t,e,n)})}function $(n,e){var t=n.dom().getAttribute(e);return null===t?void 0:t}function K(n,e){var t=n.dom();return!(!t||!t.hasAttribute)&&t.hasAttribute(e)}function J(n,e){n.dom().removeAttribute(e)}function Q(n){return k(n.dom().attributes,function(n,e){return n[e.name]=e.value,n},{})}function Z(n,e){return-1!==n.indexOf(e)}function nn(n){return void 0!==n.style&&Pn(n.style.getPropertyValue)}function en(n){var e=$n(n)?n.dom().parentNode:n.dom();return null!=e&&e.ownerDocument.body.contains(e)}function tn(n,e,t){if(!In(t))throw a.console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);nn(n)&&n.style.setProperty(e,t)}function rn(n,e,t){var r=n.dom();tn(r,e,t)}function on(n,e){var t=n.dom();P(e,function(n,e){tn(t,e,n)})}function un(n,e){var t=n.dom(),r=a.window.getComputedStyle(t).getPropertyValue(e),o=""!==r||en(n)?r:Qn(t,e);return null===o?void 0:o}function cn(n,e){var t=n.dom(),r=Qn(t,e);return kn.from(r).filter(function(n){return 0<n.length})}function an(n,e){var t,r,o=n.dom();r=e,nn(t=o)&&t.style.removeProperty(r),K(n,"style")&&""===$(n,"style").replace(/^\s+|\s+$/g,"")&&J(n,"style")}function sn(n){var e=K(n,"colspan")?parseInt($(n,"colspan"),10):1,t=K(n,"rowspan")?parseInt($(n,"rowspan"),10):1;return{element:O(n),colspan:O(e),rowspan:O(t)}}function fn(n,e){return n.cells()[e]}function ln(n,e,t){return 0!=(n.compareDocumentPosition(e)&t)}function mn(n,e){var t=function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.test(e))return r}}(n,e);if(!t)return{major:0,minor:0};function r(n){return Number(e.replace(t,"$"+n))}return ve(r(1),r(2))}function dn(n,e){return function(){return e===n}}function vn(n,e){return function(){return e===n}}function hn(n,e){var t=String(e).toLowerCase();return h(n,function(n){return n.search(t)})}function pn(e){return function(n){return Z(n,e)}}function gn(n,e){var t=n.dom();if(t.nodeType!==je)return!1;var r=t;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}function wn(n){return n.nodeType!==je&&n.nodeType!==Me||0===n.childElementCount}function bn(n,e){return n.dom()===e.dom()}function yn(n){return Jn.fromDom(n.dom().ownerDocument)}function Sn(n){return kn.from(n.dom().parentNode).map(Jn.fromDom)}function Tn(n,e){for(var t=Pn(e)?e:f,r=n.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=Jn.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o}function xn(n){return kn.from(n.dom().previousSibling).map(Jn.fromDom)}function Cn(n){return kn.from(n.dom().nextSibling).map(Jn.fromDom)}function On(n){return A(n.dom().childNodes,Jn.fromDom)}function Nn(n){return e=0,t=n.dom().childNodes,kn.from(t[e]).map(Jn.fromDom);var e,t}function En(n,e,t){return r=function(n){return gn(n,e)},d(Tn(n,t),r);var r}function An(n,e){return t=function(n){return gn(n,e)},d(On(n),t);var t}function Rn(n,e){return t=e,o=void 0===(r=n)?a.document:r.dom(),wn(o)?[]:A(o.querySelectorAll(t),Jn.fromDom);var t,r,o}var Dn=function(t){function n(){return o}function e(n){return n(t)}var r=O(t),o={fold:function(n,e){return e(t)},is:function(n){return t===n},isSome:N,isNone:f,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:n,orThunk:n,map:function(n){return Dn(n(t))},each:function(n){n(t)},bind:e,exists:e,forall:e,filter:function(n){return n(t)?o:u},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(n){return n.is(t)},equals_:function(n,e){return n.fold(f,function(n){return e(t,n)})}};return o},kn={some:Dn,none:n,from:function(n){return null==n?u:Dn(n)}},In=s("string"),jn=s("array"),Mn=s("boolean"),Pn=s("function"),_n=s("number"),Bn=Array.prototype.slice,qn=Array.prototype.indexOf,Ln=Array.prototype.push,zn=(Pn(Array.from)&&Array.from,function(){return(zn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)}),Vn=Object.keys,Fn=function(n){function e(){return t}var t=n;return{get:e,set:function(n){t=n},clone:function(){return Fn(t)}}},Wn=function(r,o,u){if(0===o.length)throw new Error("You must specify at least one required field.");return L("required",o),z(o),function(e){var t=Vn(e);w(o,function(n){return l(t,n)})||B(o,t),r(o,t);var n=d(o,function(n){return!u.validate(e[n],n)});return 0<n.length&&function(n,e){throw new Error("All values need to be of type: "+e+". Keys ("+_(n).join(", ")+") were not.")}(n,u.label),e}},Un=(a.Node.ATTRIBUTE_NODE,a.Node.CDATA_SECTION_NODE,a.Node.COMMENT_NODE),Gn=a.Node.DOCUMENT_NODE,Yn=(a.Node.DOCUMENT_TYPE_NODE,a.Node.DOCUMENT_FRAGMENT_NODE,a.Node.ELEMENT_NODE),Hn=a.Node.TEXT_NODE,Xn=(a.Node.PROCESSING_INSTRUCTION_NODE,a.Node.ENTITY_REFERENCE_NODE,a.Node.ENTITY_NODE,a.Node.NOTATION_NODE,void 0!==a.window?a.window:Function("return this;")(),U(Yn)),$n=U(Hn),Kn=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:O(n)}},Jn={fromHtml:function(n,e){var t=(e||a.document).createElement("div");if(t.innerHTML=n,!t.hasChildNodes()||1<t.childNodes.length)throw a.console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return Kn(t.childNodes[0])},fromTag:function(n,e){var t=(e||a.document).createElement(n);return Kn(t)},fromText:function(n,e){var t=(e||a.document).createTextNode(n);return Kn(t)},fromDom:Kn,fromPoint:function(n,e,t){var r=n.dom();return kn.from(r.elementFromPoint(e,t)).map(Kn)}},Qn=function(n,e){return nn(n)?n.style.getPropertyValue(e):""},Zn=Wn(V,["cell","row","replace","gap"],{validate:Pn,label:"function"}),ne=function(r,o){void 0===o&&(o=sn),Zn(r);function t(n){var e,t=o(n);return e=t,r.cell(e)}function u(n){var e=t(n);return i.get().isNone()&&i.set(kn.some(e)),c=kn.some({item:n,replacement:e}),e}var i=Fn(kn.none()),c=kn.none();return{getOrInit:function(e,t){return c.fold(function(){return u(e)},function(n){return t(e,n.item)?n.replacement:u(e)})},cursor:i.get}},ee=(M("width","height"),M("width","height"),M("rows","columns")),te=(M("row","column"),M("x","y"),M("element","rowspan","colspan")),re=M("element","rowspan","colspan","isNew"),oe=M("element","rowspan","colspan","row","column"),ue=M("element","cells","section"),ie=M("element","isNew"),ce=M("element","cells","section","isNew"),ae=M("cells","section"),se=M("details","section"),fe=M("startRow","startCol","finishRow","finishCol"),le=fn,me=function(n,e){return ln(n,e,a.Node.DOCUMENT_POSITION_CONTAINED_BY)},de=function(){return ve(0,0)},ve=function(n,e){return{major:n,minor:e}},he={nu:ve,detect:function(n,e){var t=String(e).toLowerCase();return 0===n.length?de():mn(n,t)},unknown:de},pe="Firefox",ge=function(n){var e=n.current;return{current:e,version:n.version,isEdge:dn("Edge",e),isChrome:dn("Chrome",e),isIE:dn("IE",e),isOpera:dn("Opera",e),isFirefox:dn(pe,e),isSafari:dn("Safari",e)}},we={unknown:function(){return ge({current:void 0,version:he.unknown()})},nu:ge,edge:O("Edge"),chrome:O("Chrome"),ie:O("IE"),opera:O("Opera"),firefox:O(pe),safari:O("Safari")},be="Windows",ye="Android",Se="Solaris",Te="FreeBSD",xe="ChromeOS",Ce=function(n){var e=n.current;return{current:e,version:n.version,isWindows:vn(be,e),isiOS:vn("iOS",e),isAndroid:vn(ye,e),isOSX:vn("OSX",e),isLinux:vn("Linux",e),isSolaris:vn(Se,e),isFreeBSD:vn(Te,e),isChromeOS:vn(xe,e)}},Oe={unknown:function(){return Ce({current:void 0,version:he.unknown()})},nu:Ce,windows:O(be),ios:O("iOS"),android:O(ye),linux:O("Linux"),osx:O("OSX"),solaris:O(Se),freebsd:O(Te),chromeos:O(xe)},Ne=function(n,t){return hn(n,t).map(function(n){var e=he.detect(n.versionRegexes,t);return{current:n.name,version:e}})},Ee=function(n,t){return hn(n,t).map(function(n){var e=he.detect(n.versionRegexes,t);return{current:n.name,version:e}})},Ae=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Re=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return Z(n,"edge/")&&Z(n,"chrome")&&Z(n,"safari")&&Z(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ae],search:function(n){return Z(n,"chrome")&&!Z(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return Z(n,"msie")||Z(n,"trident")}},{name:"Opera",versionRegexes:[Ae,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pn("firefox")},{name:"Safari",versionRegexes:[Ae,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(Z(n,"safari")||Z(n,"mobile/"))&&Z(n,"applewebkit")}}],De=[{name:"Windows",search:pn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return Z(n,"iphone")||Z(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:pn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pn("linux"),versionRegexes:[]},{name:"Solaris",search:pn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ke={browsers:O(Re),oses:O(De)},Ie=Fn(function(n,e){var t,r,o,u,i,c,a,s,f,l,m,d,v=ke.browsers(),h=ke.oses(),p=Ne(v,n).fold(we.unknown,we.nu),g=Ee(h,n).fold(Oe.unknown,Oe.nu);return{browser:p,os:g,deviceType:(r=p,o=n,u=e,i=(t=g).isiOS()&&!0===/ipad/i.test(o),c=t.isiOS()&&!i,a=t.isiOS()||t.isAndroid(),s=a||u("(pointer:coarse)"),f=i||!c&&a&&u("(min-device-width:768px)"),l=c||a&&!f,m=r.isSafari()&&t.isiOS()&&!1===/safari/i.test(o),d=!l&&!f&&!m,{isiPad:O(i),isiPhone:O(c),isTablet:O(f),isPhone:O(l),isTouch:O(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:O(m),isDesktop:O(d)})}}(a.navigator.userAgent,function(n){return a.window.matchMedia(n).matches})),je=Yn,Me=Gn,Pe=(Ie.get().browser.isIE(),gn),_e=(M("element","offset"),function(n,e){var t=[];return R(On(n),function(n){e(n)&&(t=t.concat([n])),t=t.concat(_e(n,e))}),t});function Be(n,e,t){for(var r=n.dom(),o=Pn(t)?t:O(!1);r.parentNode;){r=r.parentNode;var u=Jn.fromDom(r);if(e(u))return kn.some(u);if(o(u))break}return kn.none()}function qe(n,e,t){return Be(n,function(n){return gn(n,e)},t)}function Le(n,e){return t=function(n){return gn(n,e)},h(n.dom().childNodes,function(n){return t(Jn.fromDom(n))}).map(Jn.fromDom);var t}function ze(n,e){return t=e,o=void 0===(r=n)?a.document:r.dom(),wn(o)?kn.none():kn.from(o.querySelector(t)).map(Jn.fromDom);var t,r,o}function Ve(n,e,t){return r=qe,i=t,gn(o=n,u=e)?kn.some(o):Pn(i)&&i(o)?kn.none():r(o,u,i);var r,o,u,i}function Fe(n,e,t){return void 0===t&&(t=f),t(e)?kn.none():l(n,F(e))?kn.some(e):qe(e,n.join(","),function(n){return gn(n,"table")||t(n)})}function We(e,n){return Sn(n).map(function(n){return An(n,e)})}function Ue(e,t){Sn(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})}function Ge(n,e){Cn(n).fold(function(){Sn(n).each(function(n){st(n,e)})},function(n){Ue(n,e)})}function Ye(e,t){Nn(e).fold(function(){st(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})}function He(n,e){Ue(n,e),st(e,n)}function Xe(r,o){R(o,function(n,e){var t=0===e?r:o[e-1];Ge(t,n)})}function $e(e,n){R(n,function(n){st(e,n)})}function Ke(n){n.dom().textContent="",R(On(n),function(n){ft(n)})}function Je(n){var e,t=On(n);0<t.length&&(e=n,R(t,function(n){Ue(e,n)})),ft(n)}function Qe(n,e){return Jn.fromDom(n.dom().cloneNode(e))}function Ze(n){return Qe(n,!1)}function nt(n){return Qe(n,!0)}function et(n,e){var t,r,o,u,i=(t=n,r=e,o=Jn.fromTag(r),u=Q(t),X(o,u),o),c=On(nt(n));return $e(i,c),i}function tt(n,e,t,r){t===r?J(n,e):H(n,e,t)}var rt=function(n,e,t){return I(On(n),function(n){return gn(n,e)?t(n)?[n]:[]:rt(n,e,t)})},ot=function(n,e){return rt(n,e,O(!0))},ut=(i(We,"th,td"),i(We,"tr"),function(n,e){return Fe(["td","th"],n,e)}),it=function(n){return ot(n,"th,td")},ct=function(n,e){return Ve(n,"table",e)},at=function(n){return ot(n,"tr")},st=function(n,e){n.dom().appendChild(e.dom())},ft=function(n){var e=n.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},lt=function(o,n){function e(n,e){0<n.length?function(n,e){var t=Le(o,e).getOrThunk(function(){var n=Jn.fromTag(e,yn(o).dom());return st(o,n),n});Ke(t);var r=A(n,function(n){n.isNew()&&u.push(n.element());var e=n.element();return Ke(e),R(n.cells(),function(n){n.isNew()&&i.push(n.element()),tt(n.element(),"colspan",n.colspan(),1),tt(n.element(),"rowspan",n.rowspan(),1),st(e,n.element())}),e});$e(t,r)}(n,e):Le(o,e).each(ft)}var u=[],i=[],t=[],r=[],c=[];return R(n,function(n){switch(n.section()){case"thead":t.push(n);break;case"tbody":r.push(n);break;case"tfoot":c.push(n)}}),e(t,"thead"),e(r,"tbody"),e(c,"tfoot"),{newRows:O(u),newCells:O(i)}};function mt(r,o){function n(n){var e=o(n);if(e<=0||null===e){var t=un(n,r);return parseFloat(t)||0}return e}function u(o,n){return k(n,function(n,e){var t=un(o,e),r=void 0===t?0:parseInt(t,10);return isNaN(r)?n:n+r},0)}return{set:function(n,e){if(!_n(e)&&!e.match(/^[0-9]+$/))throw new Error(r+".set accepts only positive integer values. Value was "+e);var t=n.dom();nn(t)&&(t.style[r]=e+"px")},get:n,getOuter:n,aggregate:u,max:function(n,e,t){var r=u(n,t);return r<e?e-r:0}}}function dt(n){return Vt.getOuter(n)}function vt(n,e){return void 0!==n?n:void 0!==e?e:0}function ht(n){var e=n.dom().ownerDocument,t=e.body,r=e.defaultView,o=e.documentElement;if(t===n.dom())return Wt(t.offsetLeft,t.offsetTop);var u=vt(r.pageYOffset,o.scrollTop),i=vt(r.pageXOffset,o.scrollLeft),c=vt(o.clientTop,t.clientTop),a=vt(o.clientLeft,t.clientLeft);return Ut(n).translate(i-a,u-c)}function pt(n){return Gt.getOuter(n)}function gt(n){return ht(n).left()+pt(n)}function wt(n){return ht(n).left()}function bt(n,e){return Ht(n,wt(e))}function yt(n,e){return Ht(n,gt(e))}function St(n){return ht(n).top()}function Tt(n,e){return Yt(n,St(e))}function xt(n,e){return Yt(n,St(e)+dt(e))}function Ct(t,e,r){if(0===r.length)return[];var n=A(r.slice(1),function(n,e){return n.map(function(n){return t(e,n)})}),o=r[r.length-1].map(function(n){return e(r.length-1,n)});return n.concat([o])}function Ot(n,e){var t=$(n,e);return void 0===t||""===t?[]:t.split(" ")}function Nt(n){return void 0!==n.dom().classList}function Et(n,e){return o=e,u=Ot(t=n,r="class").concat([o]),H(t,r,u.join(" ")),1;var t,r,o,u}function At(n,e){Nt(n)?n.dom().classList.add(e):Et(n,e)}function Rt(n,e){return n+","+e}function Dt(n,e){for(var t=[],r=n;r<e;r++)t.push(r);return t}function kt(n){var e=Rn(n.parent(),"."+or);R(e,ft)}function It(t,n,r){var o=t.origin();R(n,function(n,e){n.each(function(n){var e=r(o,n);At(e,or),st(t.parent(),e)})})}function jt(n,e,t,r,o,u){var i,c,a,s,f=ht(e),l=0<t.length?o.positions(t,e):[];i=n,c=l,a=f,s=pt(e),It(i,c,function(n,e){var t=rr(e.row(),a.left()-n.left(),e.y()-n.top(),s,7);return At(t,ur),t});var m,d,v,h,p=0<r.length?u.positions(r,e):[];m=n,d=p,v=f,h=dt(e),It(m,d,function(n,e){var t=tr(e.col(),e.x()-n.left(),v.top()-n.top(),7,h);return At(t,ir),t})}function Mt(n,e){if(0===n.length)return 0;var t=n[0];return p(n,function(n){return!e(t.element(),n.element())}).fold(function(){return n.length},function(n){return n})}function Pt(n,e){function t(n){return function(n,e){for(var t=0;t<n.length;t++){var r=e(n[t],t);if(r.isSome())return r}return kn.none()}(n,function(n){return Sn(n.element()).map(function(n){var e=Sn(n).isNone();return ie(n,e)})}).getOrThunk(function(){return ie(e.row(),!0)})}return A(n,function(n){var e=t(n.details());return ce(e.element(),n.details(),n.section(),e.isNew())})}function _t(n,e){var t=g(A(n.all(),function(n){return n.cells()}));return h(t,function(n){return bn(e,n.element())})}function Bt(s,u,i,f,l){return function(t,r,n,c,o){var e=nr(r),a=Kt.generate(e);return u(a,n).map(function(n){var e,t,r,o=fr(a,c,!1),u=s(o,n,bn,l(c)),i=(e=u.grid(),t=c,r=sr(e,bn),Pt(r,t));return{grid:O(i),cursor:u.cursor}}).fold(function(){return kn.none()},function(n){var e=lt(r,n.grid());return i(r,n.grid(),o),f(r),cr(t,r,Xt.height,o),kn.some({cursor:n.cursor,newRows:e.newRows,newCells:e.newCells})})}}function qt(e,n){return ut(n.element()).bind(function(n){return _t(e,n)})}function Lt(e,n){var t=function(n){for(var e=[],t=function(n){e.push(n)},r=0;r<n.length;r++)n[r].each(t);return e}(A(n.selection(),function(n){return ut(n).bind(function(n){return _t(e,n)})}));return 0<t.length?kn.some(t):kn.none()}var zt,Vt=mt("height",function(n){var e=n.dom();return en(n)?e.getBoundingClientRect().height:e.offsetHeight}),Ft=function(t,r){return{left:O(t),top:O(r),translate:function(n,e){return Ft(t+n,r+e)}}},Wt=Ft,Ut=function(n){var e,t=n.dom(),r=t.ownerDocument.body;return r===t?Wt(r.offsetLeft,r.offsetTop):en(n)?(e=t.getBoundingClientRect(),Wt(e.left,e.top)):Wt(0,0)},Gt=mt("width",function(n){return n.dom().offsetWidth}),Yt=M("row","y"),Ht=M("col","x"),Xt={height:{delta:t,positions:function(n){return Ct(Tt,xt,n)},edge:St},rtl:{delta:function(n){return-n},edge:gt,positions:function(n){return Ct(yt,bt,n)}},ltr:{delta:t,edge:wt,positions:function(n){return Ct(bt,yt,n)}}},$t=function(n,e){var t=I(n.all(),function(n){return n.cells()});return d(t,e)},Kt={generate:function(n){var s={},e=[],t=n.length,f=0;R(n,function(n,c){var a=[];R(n.cells(),function(n){for(var e=0;void 0!==s[Rt(c,e)];)e++;for(var t=oe(n.element(),n.rowspan(),n.colspan(),c,e),r=0;r<n.colspan();r++)for(var o=0;o<n.rowspan();o++){var u=e+r,i=Rt(c+o,u);s[i]=t,f=Math.max(f,u+1)}a.push(t)}),e.push(ue(n.element(),a,n.section()))});var r=ee(t,f);return{grid:O(r),access:O(s),all:O(e)}},getAt:function(n,e,t){var r=n.access()[Rt(e,t)];return void 0!==r?kn.some(r):kn.none()},findItem:function(n,e,t){var r=$t(n,function(n){return t(e,n.element())});return 0<r.length?kn.some(r[0]):kn.none()},filterItems:$t,justCells:function(n){var e=A(n.all(),function(n){return n.cells()});return g(e)}},Jt=function(n,e,t){var r=n();return h(r,e).orThunk(function(){return kn.from(r[0]).orThunk(t)}).map(function(n){return n.element()})},Qt=function(t){var n=t.grid(),e=Dt(0,n.columns()),r=Dt(0,n.rows());return A(e,function(e){return Jt(function(){return I(r,function(n){return Kt.getAt(t,n,e).filter(function(n){return n.column()===e}).fold(O([]),function(n){return[n]})})},function(n){return 1===n.colspan()},function(){return Kt.getAt(t,0,e)})})},Zt=function(t){var n=t.grid(),e=Dt(0,n.rows()),r=Dt(0,n.columns());return A(e,function(e){return Jt(function(){return I(r,function(n){return Kt.getAt(t,e,n).filter(function(n){return n.row()===e}).fold(O([]),function(n){return[n]})})},function(n){return 1===n.rowspan()},function(){return Kt.getAt(t,e,0)})})},nr=function(n){var e=at(n);return A(e,function(n){var e=n,t=Sn(e).map(function(n){var e=F(n);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"}).getOr("tbody"),r=A(it(n),function(n){var e=K(n,"rowspan")?parseInt($(n,"rowspan"),10):1,t=K(n,"colspan")?parseInt($(n,"colspan"),10):1;return te(n,e,t)});return ue(e,r,t)})},er={resolve:(zt="ephox-snooker".replace(/\./g,"-"),{resolve:function(n){return zt+"-"+n}}).resolve},tr=function(n,e,t,r,o){var u=Jn.fromTag("div");return on(u,{position:"absolute",left:e-r/2+"px",top:t+"px",height:o+"px",width:r+"px"}),X(u,{"data-column":n,role:"presentation"}),u},rr=function(n,e,t,r,o){var u=Jn.fromTag("div");return on(u,{position:"absolute",left:e+"px",top:t-o/2+"px",height:o+"px",width:r+"px"}),X(u,{"data-row":n,role:"presentation"}),u},or=er.resolve("resizer-bar"),ur=er.resolve("resizer-rows"),ir=er.resolve("resizer-cols"),cr=function(n,e,t,r){kt(n);var o=nr(e),u=Kt.generate(o),i=Zt(u),c=Qt(u);jt(n,e,i,c,t,r)},ar=function(n,e,t,r){var o,u=n[e].cells().slice(t),i=Mt(u,r),c=(o=t,A(n,function(n){return le(n,o)}).slice(e)),a=Mt(c,r);return{colspan:O(i),rowspan:O(a)}},sr=function(o,u){var i=A(o,function(n,e){return A(n.cells(),function(n,e){return!1})});return A(o,function(n,r){var e=I(n.cells(),function(n,e){if(!1!==i[r][e])return[];var t=ar(o,r,e,u);return function(n,e,t,r){for(var o=n;o<n+t;o++)for(var u=e;u<e+r;u++)i[o][u]=!0}(r,e,t.rowspan(),t.colspan()),[re(n.element(),t.rowspan(),t.colspan(),n.isNew())]});return se(e,n.section())})},fr=function(n,e,t){for(var r=[],o=0;o<n.grid().rows();o++){for(var u=[],i=0;i<n.grid().columns();i++){var c=Kt.getAt(n,o,i).map(function(n){return ie(n.element(),t)}).getOrThunk(function(){return ie(e.gap(),!0)});u.push(c)}var a=ae(u,n.all()[o].section());r.push(a)}return r},lr={ltr:Xt.ltr,rtl:Xt.rtl};function mr(e){function t(n){return e(n).isRtl()?lr.rtl:lr.ltr}return{delta:function(n,e){return t(e).delta(n,e)},edge:function(n){return t(n).edge(n)},positions:function(n,e){return t(e).positions(n,e)}}}function dr(n){return kr.get(n)}function vr(n,e){kr.set(n,e)}function hr(n){return e=n,kr.getOption(e).filter(function(n){return 0!==n.trim().length||-1<n.indexOf("Â ")}).isSome();var e}function pr(n){return hr(n)||l(Ir,F(n))}function gr(n){return o=pr,(u=function(n){for(var e=0;e<n.childNodes.length;e++){var t=Jn.fromDom(n.childNodes[e]);if(o(t))return kn.some(t);var r=u(n.childNodes[e]);if(r.isSome())return r}return kn.none()})(n.dom());var o,u}function wr(){var n=Jn.fromTag("td");return st(n,Jn.fromTag("br")),n}function br(n,e,t){var r=et(n,e);return P(t,function(n,e){null===n?J(r,e):H(r,e,n)}),r}function yr(n){return function(){return Jn.fromTag("tr",n.dom())}}function Sr(n){return n.dom().textContent}function Tr(n){return n.getBoundingClientRect().width}function xr(n){return Jn.fromDom(n.getBody())}function Cr(n){var e=Rn(n,"td[data-mce-style],th[data-mce-style]");J(n,"data-mce-style"),R(e,function(n){J(n,"data-mce-style")})}function Or(n){var e=parseFloat(n);return isNaN(e)?kn.none():kn.some(e)}function Nr(n,e){return n<e?-1:e<n?1:0}function Er(e,t){return n=Or(e),r=Or(t),o=Nr,(n.isSome()&&r.isSome()?kn.some(o(n.getOrDie(),r.getOrDie())):kn.none()).getOrThunk(function(){return n=t,e.localeCompare(n);var n});var n,r,o}var Ar,Rr,Dr,kr=(Ar=$n,{get:function(n){if(!Ar(n))throw new Error("Can only get "+Rr+" value of a "+Rr+" node");return Dr(n).getOr("")},getOption:Dr=function(n){return Ar(n)?kn.from(n.dom().nodeValue):kn.none()},set:function(n,e){if(!Ar(n))throw new Error("Can only set raw "+Rr+" value of a "+Rr+" node");n.dom().nodeValue=e}}),Ir=["img","br"],jr=function(m,n,d){return{row:yr(n),cell:function(n){var r,o,u,e,t,i,c,a=yn(n.element()),s=Jn.fromTag(F(n.element()),a.dom()),f=d.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),l=0<f.length?(r=n.element(),o=s,u=f,gr(r).map(function(n){var e=u.join(","),t=En(n,e,function(n){return bn(n,r)});return v(t,function(n,e){var t=Ze(e);return J(t,"contenteditable"),st(n,t),t},o)}).getOr(o)):s;return st(l,Jn.fromTag("br")),e=n.element(),t=s,i=e.dom(),c=t.dom(),nn(i)&&nn(c)&&(c.style.cssText=i.style.cssText),an(s,"height"),1!==n.colspan()&&an(n.element(),"width"),m(n.element(),s),s},replace:br,gap:wr}},Mr={isRtl:O(!(Rr="text"))},Pr={isRtl:O(!0)},_r=function(n){return"rtl"==("rtl"===un(n,"direction")?"rtl":"ltr")?Pr:Mr};function Br(d,v){function e(f,l,m){return function(n,e){Cr(n);var t,r,o,u,i=(t=v().resizeHandler.lazyWire(),r=t.parent(),o=t.view(),u=t.origin(),Pn(r.dom)?t:{origin:O(zn(zn({},u),{left:O(u.left),top:O(u.top)})),parent:O(zn(zn({},r),{dom:O(r.dom)})),view:O(zn(zn({},o),{dom:O(o.dom)}))}),c=Jn.fromDom(d.getDoc()),a=mr(_r),s=jr(m,c,y);return l(n)?f(i,n,e,s,a).bind(function(n){return R(n.newRows(),function(n){var e,t;e=d,t=n.dom(),e.fire("newrow",{node:t})}),R(n.newCells(),function(n){var e,t;e=d,t=n.dom(),e.fire("newcell",{node:t})}),n.cursor().map(function(n){var e=d.dom.createRng();return e.setStart(n.dom(),0),e.setEnd(n.dom(),0),e})}):kn.none()}}function a(n,e,t){return S(n,(r=n,o=e,u=t,kn.from(r[o]).bind(function(n){return kn.from(n.cells()[u]).bind(function(n){return kn.from(n.element())})})));var r,o,u}function f(n,r,o,u){var e=D(n,function(n){return n.section()}),t=A(e,function(n){return D(n,function(n){return F(le(n,r).element())})});return I(t,function(n){return I(n,function(n){return"th"===F(le(n[0],r).element())?n:(e=A(n,function(n){var e=le(n,r);return{row:n,text:Sr(e.element())}}),t=j(e,function(n,e){var t=o(n.text,e.text);return u?t:-1*t}),A(t,function(n){return n.row}));var e,t})})}function l(n,e,o,u){var t=n[e].cells(),r=A(t,function(n){return Sr(n.element())}),i=A(n,function(n){return{zippedCells:A(n.cells(),function(n,e){return{cell:n,reference:t[e],referenceText:r[e]}}),section:n.section()}});return A(i,function(n){var e=D(n.zippedCells,function(n){return F(n.reference.element())}),t=I(e,function(n){return"th"===F(n[0].reference.element())?n:j(n,function(n,e){var t=o(n.referenceText,e.referenceText);return u?t:-1*t})}),r=A(t,function(n){return n.cell});return ae(r,n.section)})}function m(n,e,t,r,o){var u=n.slice(0,e),i=n.slice(e,t+1);return{beforeRows:u,afterRows:n.slice(t+1,n.length),selectionGridBefore:i.map(function(n){return{cells:function(){return n.cells().slice(0,r)},section:function(){return n.section()}}}),selectionGrid:i.map(function(n){return{cells:function(){return n.cells().slice(r,o+1)},section:function(){return n.section()}}}),selectionGridAfter:i.map(function(n){return{cells:function(){return n.cells().slice(o+1,n.cells().length)},section:function(){return n.section()}}})}}function h(o,n){var e=A(n,function(n,e){var t=o.selectionGridBefore[e].cells(),r=o.selectionGridAfter[e].cells();return{cells:function(){return t.concat(n.cells()).concat(r)},section:function(){return n.section()}}});return o.beforeRows.concat(e).concat(o.afterRows)}function s(n,e,t,r,o,u,i,c){var a=m(n,t,r,o,u),s=f(a.selectionGrid,e-o,i,c);return h(a,s)}function p(n,e,t,r,o,u,i,c){var a=m(n,t,r,o,u),s=l(a.selectionGrid,e-t,i,c);return h(a,s)}function g(n){return k(n,function(n,e){return E(n,function(n){return n.row()===e.row()})?n:n.concat([e])},[]).sort(function(n,e){return n.row()-e.row()})}function w(n){return k(n,function(n,e){return E(n,function(n){return n.column()===e.column()})?n:n.concat([e])},[]).sort(function(n,e){return n.column()-e.column()})}function t(n,e,t,r,o){var u=s(n,o,0,n.length,o,o,t,r);return a(u,e[0].row(),e[0].column())}function r(n,e,t,r,o){var u=g(e),i=w(e),c=s(n,o,u[0].row(),u[u.length-1].row(),i[0].column(),i[i.length-1].column(),t,r);return a(c,e[0].row(),e[0].column())}function o(n,e,t,r,o){var u=T(n,o,t,r);return a(u,e.row(),e.column())}function u(n,e,t,r,o){var u=p(n,o,o,o,0,n[e[0].row()].cells().length,t,r);return a(u,e[0].row(),e[0].column())}function i(n,e,t,r,o){var u=g(e),i=w(e),c=p(n,o,u[0].row(),u[u.length-1].row(),i[0].column(),i[i.length-1].column(),t,r);return a(c,e[0].row(),e[0].column())}function c(n,e,t,r,o){var u=x(n,o,t,r);return a(u,e.row(),e.column())}function b(u,i,c,a,s){return function(n,e,t,r,o){return Bt(function(n,e){return u(n,e,i,c,a)},s,C,C,ne)(n,e,t,r,o)}}var n,y=(n=d.getParam("table_clone_elements"),In(n)?kn.some(n.split(/[ ,]/)):Array.isArray(n)?kn.some(n):kn.none()),S=M("grid","cursor"),T=f,x=l;return{sortColumnRowsAsc:function(n){return e(b(t,Er,!0,n,Lt),N,C)},sortColumnRowsDesc:function(n){return e(b(t,Er,!1,n,Lt),N,C)},sortSelectionRowsAsc:function(n){return e(b(r,Er,!0,n,Lt),N,C)},sortSelectionRowsDesc:function(n){return e(b(r,Er,!1,n,Lt),N,C)},sortTableRowsAsc:function(n){return e(b(o,Er,!0,n,qt),N,C)},sortTableRowsDesc:function(n){return e(b(o,Er,!1,n,qt),N,C)},sortRowColumnsAsc:function(n){return e(b(u,Er,!0,n,Lt),N,C)},sortRowColumnsDesc:function(n){return e(b(u,Er,!1,n,Lt),N,C)},sortSelectionColumnsAsc:function(n){return e(b(i,Er,!0,n,Lt),N,C)},sortSelectionColumnsDesc:function(n){return e(b(i,Er,!1,n,Lt),N,C)},sortTableColumnsAsc:function(n){return e(b(c,Er,!0,n,qt),N,C)},sortTableColumnsDesc:function(n){return e(b(c,Er,!1,n,qt),N,C)}}}function qr(n,e){return e.column()>=n.startCol()&&e.column()+e.colspan()-1<=n.finishCol()&&e.row()>=n.startRow()&&e.row()+e.rowspan()-1<=n.finishRow()}function Lr(n,e,t){var r=Kt.findItem(n,e,bn),o=Kt.findItem(n,t,bn);return r.bind(function(r){return o.map(function(n){return e=r,t=n,fe(Math.min(e.row(),t.row()),Math.min(e.column(),t.column()),Math.max(e.row()+e.rowspan()-1,t.row()+t.rowspan()-1),Math.max(e.column()+e.colspan()-1,t.column()+t.colspan()-1));var e,t})})}var zr=function(o,u,e){function t(n){J(n,o.selected()),J(n,o.firstSelected()),J(n,o.lastSelected())}function i(n){H(n,o.selected(),"1")}function c(n){r(n),e()}var r=function(n){var e=Rn(n,o.selectedSelector());R(e,t)};return{clearBeforeUpdate:r,clear:c,selectRange:function(n,e,t,r){c(n),R(e,i),H(t,o.firstSelected(),"1"),H(r,o.lastSelected(),"1"),u(e,t,r)},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}},Vr=function(n,e){for(var t=!0,r=i(qr,e),o=e.startRow();o<=e.finishRow();o++)for(var u=e.startCol();u<=e.finishCol();u++)t=t&&Kt.getAt(n,o,u).exists(r);return t?kn.some(e):kn.none()},Fr=function(e,n,t){return Lr(e,n,t).bind(function(n){return Vr(e,n)})},Wr=function(n){var e=nr(n);return Kt.generate(e)},Ur=function(n,e,t){var r=Wr(n);return Fr(r,e,t)},Gr=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Yr(n,e,t){var r=n.property().children(e);return p(r,i(n.eq,t)).map(function(n){return{before:O(r.slice(0,n)),after:O(r.slice(n+1))}})}function Hr(n,e){return i(n.eq,e)}function Xr(i,c,n,e){var a=i.property().children(c);if(i.eq(c,n[0]))return kn.some([n[0]]);if(i.eq(c,e[0]))return kn.some([e[0]]);function t(n){var e,t,r=(e=n,(t=Bn.call(e,0)).reverse(),t),o=p(r,Hr(i,c)).getOr(-1),u=o<r.length-1?r[o+1]:r[o];return p(a,Hr(i,u))}var r=t(n),o=t(e);return r.bind(function(r){return o.map(function(n){var e=Math.min(r,n),t=Math.max(r,n);return a.slice(e,t+1)})})}function $r(e,n,t,r){function o(e){return p(e,r).fold(function(){return e},function(n){return e.slice(0,n+1)})}void 0===r&&(r=f);var u=[n].concat(e.up().all(n)),i=[t].concat(e.up().all(t)),c=o(u),a=o(i),s=h(c,function(n){return E(a,Hr(e,n))});return{firstpath:O(c),secondpath:O(a),shared:O(s)}}function Kr(n){return qe(n,"table")}function Jr(n,e){return yo.cata(e.get(),O([]),t,O([n]))}function Qr(n,e){var t,r=(t=e,function(n){return bn(n,xr(t))});return ct(n,r)}function Zr(t){return function(n){var e=n.getData();n.close(),t.undoManager.transact(function(){t.execCommand("mceSortTableAdvanced",!1,e),t.focus(),t.addVisual()})}}function no(e,t,r){function o(n){return function(){return e.execCommand(n)}}e.on("init",function(){var n=[{type:"menuitem",text:"Sort table by column ascending",onAction:o("mceSortTableByColumnAsc"),onSetup:t().selectionTargets.onSetupCellOrRow},{type:"menuitem",text:"Sort table by column descending",onAction:o("mceSortTableByColumnDesc"),onSetup:t().selectionTargets.onSetupCellOrRow},{type:"separator"},{type:"menuitem",text:"Advanced sort...",onAction:function(){return Eo(e,r)},onSetup:t().selectionTargets.onSetupCellOrRow}];e.ui.registry.addNestedMenuItem("advtablesort",{type:"nestedmenuitem",text:"Sort",getSubmenuItems:function(){return n}})})}function eo(n){var e,t,r;if(x(tinymce,"5.1.2"))return a.console.error("Please use Advanced Tables with TinyMCE 5.1.2 or later."),{};if(t="table",r=n.getParam("plugins","","string"),l(r.split(/[ ,]/),t)){var o=function(){return n.plugins.table},u=Br(n,o),i={get:function(){var n=xr(e);return mo(n,wo.selectedSelector()).fold(function(){return void 0===e.selection.getStart()?yo.none():yo.single(e.selection)},function(n){return yo.multiple(n)})}};Ao(e=n,u,i),no(n,o,i)}else a.console.log("Please use the Advanced Tables Plugin together with the Tables plugin.");return{}}var to,ro=M("left","right"),oo=M("first","second","splits"),uo=function(r,o,n,e){var t=o(r,n);return v(e,function(n,e){var t=o(r,e);return io(r,n,t)},t)},io=function(e,n,t){return n.bind(function(n){return t.filter(i(e.eq,n))})},co={sharedOne:function(n,e,t){return 0<t.length?uo(n,e,(r=t)[0],r.slice(1)):kn.none();var r},subset:function(e,n,t){var r=$r(e,n,t);return r.shared().bind(function(n){return Xr(e,n,r.firstpath(),r.secondpath())})},ancestors:$r,breakToLeft:function(t,r,o){return Yr(t,r,o).map(function(n){var e=t.create().clone(r);return t.insert().appendAll(e,n.before().concat([o])),t.insert().appendAll(r,n.after()),t.insert().before(r,e),ro(e,r)})},breakToRight:function(t,r,n){return Yr(t,r,n).map(function(n){var e=t.create().clone(r);return t.insert().appendAll(e,n.after()),t.insert().after(r,e),ro(r,e)})},breakPath:function(u,n,i,c){var a=function(n,e,o){var t=oo(n,kn.none(),o);return i(n)?oo(n,e,o):u.property().parent(n).bind(function(r){return c(u,r,n).map(function(n){var e=[{first:n.left,second:n.right}],t=i(r)?r:n.left();return a(t,kn.some(n.right()),o.concat(e))})}).getOr(t)};return a(n,kn.none(),[])}},ao={up:O({selector:qe,closest:Ve,predicate:Be,all:Tn}),down:O({selector:Rn,predicate:_e}),styles:O({get:un,getRaw:cn,set:rn,remove:an}),attrs:O({get:$,set:H,remove:J,copyTo:function(n,e){var t=Q(n);X(e,t)}}),insert:O({before:Ue,after:Ge,afterAll:Xe,append:st,appendAll:$e,prepend:Ye,wrap:He}),remove:O({unwrap:Je,remove:ft}),create:O({nu:Jn.fromTag,clone:function(n){return Jn.fromDom(n.dom().cloneNode(!1))},text:Jn.fromText}),query:O({comparePosition:function(n,e){return n.dom().compareDocumentPosition(e.dom())},prevSibling:xn,nextSibling:Cn}),property:O({children:On,name:F,parent:Sn,document:function(n){return n.dom().ownerDocument},isText:$n,isComment:G,isElement:Xn,getText:dr,setText:vr,isBoundary:function(n){return!!Xn(n)&&("body"===F(n)||l(Gr,F(n)))},isEmptyTag:function(n){return!!Xn(n)&&l(["br","img","hr","input"],F(n))},isNonEditable:function(n){return Xn(n)&&"false"===$(n,"contenteditable")}}),eq:bn,is:Pe},so=function(t,n){return co.sharedOne(ao,function(n,e){return t(e)},n)},fo=(function(n,e){var t=n.concat(e);if(0===t.length)throw new Error("You must specify at least one required or optional field.");L("required",n),L("optional",e),z(t)}(["boxes","start","finish"],[]),function(n,e){var t=Rn(n,e);return 0<t.length?kn.some(t):kn.none()}),lo=function(n,e,r){return ze(n,e).bind(function(t){return ze(n,r).bind(function(e){return so(Kr,[t,e]).map(function(n){return{first:O(t),last:O(e),table:O(n)}})})})},mo=function(n,e){return fo(n,e)},vo=function(o,n,e){return lo(o,n,e).bind(function(t){function n(n){return bn(o,n)}var e=qe(t.first(),"thead,tfoot,tbody,table",n),r=qe(t.last(),"thead,tfoot,tbody,table",n);return e.bind(function(e){return r.bind(function(n){return bn(e,n)?Ur(t.table(),t.first(),t.last()):kn.none()})})})},ho="data-mce-selected",po="data-mce-first-selected",go="data-mce-last-selected",wo={selected:O(ho),selectedSelector:O("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:O("[data-mce-selected]"),firstSelected:O(po),firstSelectedSelector:O("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:O(go),lastSelectedSelector:O("td[data-mce-last-selected],th[data-mce-last-selected]")},bo=function(i){if(!jn(i))throw new Error("cases must be an array");if(0===i.length)throw new Error("there must be at least one case");var c=[],t={};return R(i,function(n,r){var e=Vn(n);if(1!==e.length)throw new Error("one and only one name per case");var o=e[0],u=n[o];if(void 0!==t[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!jn(u))throw new Error("case arguments must be an array");c.push(o),t[o]=function(){var n=arguments.length;if(n!==u.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+u.length+" ("+u+"), got "+n);for(var t=new Array(n),e=0;e<t.length;e++)t[e]=arguments[e];return{fold:function(){if(arguments.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+arguments.length);return arguments[r].apply(null,t)},match:function(n){var e=Vn(n);if(c.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+e.join(","));if(!w(c,function(n){return l(e,n)}))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+c.join(", "));return n[o].apply(null,t)},log:function(n){a.console.log(n,{constructors:c,constructor:o,params:t})}}}}),t}([{none:[]},{multiple:["elements"]},{single:["selection"]}]),yo={cata:function(n,e,t,r){return n.fold(e,t,r)},none:bo.none,multiple:bo.multiple,single:bo.single},So=function(n,e){return yo.cata(e.get(),kn.none,function(e){return 0===e.length?kn.none():vo(n,wo.firstSelectedSelector(),wo.lastSelectedSelector()).bind(function(n){return 1<e.length?kn.some({bounds:O(n),cells:O(e)}):kn.none()})},kn.none)},To=function(n,e){var t=Jr(n,e);return 0<t.length&&w(t,function(n){return K(n,"rowspan")&&1<parseInt($(n,"rowspan"),10)||K(n,"colspan")&&1<parseInt($(n,"colspan"),10)})?kn.some(t):kn.none()},xo=Jr,Co=function(n,e,t){return{element:O(t),mergable:O(So(e,n)),unmergable:O(To(t,n)),selection:O(xo(t,n))}},Oo=(to="th,td",function(n){return kn.from(n.dom.getParent(n.selection.getStart(),to)).map(Jn.fromDom)}),No=function(n){var e=nr(n);return Kt.generate(e).grid()},Eo=function(c,u){function t(n){var r,e;return{type:"selectbox",name:"roworcol",label:"column"===n?"Column":"Row",items:"column"===n?function(){var r=f.get().getOrDie("state must be present"),n=r.limit?r.finishCol()+1-r.startCol():r.columns();return m(n,function(n){var e=r.limit?r.startCol():0,t=function(n){for(var e=n,t="";0<Math.floor(e);)--e,t+=String.fromCharCode("A".charCodeAt(0)+e%26),e/=26;return t.split("").reverse().join("")}(n+e+1);return{text:c.translate(["Column {0}",t]),value:""+(n+e)}})}():(r=f.get().getOrDie("state must be present"),e=r.limit?r.finishRow()+1-r.startRow():r.rows(),m(e,function(n){var e=r.limit?r.startRow():0,t=(n+e+1).toString();return{text:c.translate(["Row {0}",t]),value:""+(n+e)}}))}}function a(n){return{title:"Advanced Sort",size:"normal",body:{type:"panel",items:[{type:"grid",columns:2,items:[r,t(e=n),{type:"selectbox",name:"sort",label:"Sort",items:["column"===e?{text:"Column",value:"column"}:{text:"Row",value:"row"},{text:"Selection",value:"selection"},{text:"Table",value:"table"}]},o]}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"sort",text:"Sort",primary:!0}]};var e}function s(){f.set(kn.none())}var r={type:"selectbox",name:"sortby",label:"Sort by",items:[{text:"Column",value:"column"},{text:"Row",value:"row"}]},f=Fn(kn.none()),o={type:"selectbox",name:"order",label:"Order",items:[{text:"Ascending",value:"ascending"},{text:"Descending",value:"descending"}]},l=function(n,e){if("sortby"===e.name){var t=n.getData(),r=f.get().getOrDie("state must be present"),o={roworcol:"column"===t.sortby?""+r.startCol():""+r.startRow()},u=zn(zn({},t),o),i=zn(zn({},a(t.sortby)),{onChange:l,onClose:s,onSubmit:Zr(c),initialData:u});n.redial(i),n.focus("sortby")}};Oo(c).each(function(o){Qr(o,c).each(function(n){function t(n){f.set(kn.some(n));var e={sortby:"column",roworcol:""+n.startCol(),sort:"column",order:"ascending"},t=zn(zn({},a("column")),{onChange:l,onClose:s,onSubmit:Zr(c),initialData:e});c.windowManager.open(t)}var e=Co(u,n,o),r=No(n);e.mergable().fold(function(){Ur(n,o,o).each(function(n){var e=zn(zn(zn({},n),r),{limit:!1});t(e)})},function(n){var e=zn(zn(zn({},n.bounds()),r),{limit:!0});t(e)})})})},Ao=function(v,i,r){function h(n){return{width:Tr(n.dom()),height:Tr(n.dom())}}function c(n){return"selection"===n}function a(n){return"ascending"===n}function t(n){var e,t,r,o,u=parseInt(n.roworcol,10);"column"===n.sortby?(o=u,"column"===(r=n).sort?a(r.order)?s(i.sortColumnRowsAsc(o)):s(i.sortColumnRowsDesc(o)):c(r.sort)?a(r.order)?s(i.sortSelectionRowsAsc(o)):s(i.sortSelectionRowsDesc(o)):a(r.order)?s(i.sortTableRowsAsc(o)):s(i.sortTableRowsDesc(o))):(t=u,"row"===(e=n).sort?a(e.order)?s(i.sortRowColumnsAsc(t)):s(i.sortRowColumnsDesc(t)):c(e.sort)?a(e.order)?s(i.sortSelectionColumnsAsc(t)):s(i.sortSelectionColumnsDesc(t)):a(e.order)?s(i.sortTableColumnsAsc(t)):s(i.sortTableColumnsDesc(t)))}function n(){return Oo(v).bind(function(e){return Qr(e,v).bind(function(n){return Ur(n,e,e).map(function(n){return n.startCol()})})})}function e(){return Oo(v).bind(function(e){return Qr(e,v).bind(function(n){return Ur(n,e,e).map(function(n){return n.startRow()})})})}var p=zr(wo,C,C),s=function(t){Oo(v).each(function(e){Qr(e,v).each(function(m){var n=Co(r,m,e),d=h(m);t(m,n).each(function(n){var e,t,r,o,u,i,c,a,s,f,l;e=d,l=h(t=m),e.width===l.width&&e.height===l.height||(c=v,a=t.dom(),s=e.width,f=e.height,c.fire("ObjectResizeStart",{target:a,width:s,height:f}),r=v,o=t.dom(),u=l.width,i=l.height,r.fire("ObjectResized",{target:o,width:u,height:i})),v.selection.setRng(n),v.focus(),p.clear(m),Cr(m)})})})};v.addCommand("mceSortTableByColumnAsc",function(){n().each(function(n){s(i.sortTableRowsAsc(n))})}),v.addCommand("mceSortTableByColumnDesc",function(){n().each(function(n){s(i.sortTableRowsDesc(n))})}),v.addCommand("mceSortTableByRowAsc",function(){e().each(function(n){s(i.sortTableColumnsAsc(n))})}),v.addCommand("mceSortTableByRowDesc",function(){e().each(function(n){s(i.sortTableColumnsDesc(n))})}),v.addCommand("mceSortTableAdvanced",function(n,e){return t(e)}),v.addCommand("mceAdvancedTableSort",function(){return Eo(v,r)})};tinymce.PluginManager.add("advtable",eo)}(window);